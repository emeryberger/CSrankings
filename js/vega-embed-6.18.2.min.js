!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vega"),require("vega-lite")):"function"==typeof define&&define.amd?define(["vega","vega-lite"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).vegaEmbed=t(e.vega,e.vegaLite)}(this,(function(e,t){"use strict";function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n,i=r(e),o=r(t),s="6.18.2",a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=Object.prototype.hasOwnProperty;function c(e,t){return l.call(e,t)}function h(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);t=[];for(var n in e)c(e,n)&&t.push(n);return t}function p(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function u(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0}function f(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function d(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function v(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,r=e.length;t<r;t++)if(v(e[t]))return!0}else if("object"==typeof e){var n=h(e),i=n.length;for(t=0;t<i;t++)if(v(e[n[t]]))return!0}return!1}function g(e,t){var r=[e];for(var n in t){var i="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==i&&r.push(n+": "+i)}return r.join("\n")}var m=function(e){function t(t,r,n,i,o){var s=this.constructor,a=e.call(this,g(t,{name:r,index:n,operation:i,tree:o}))||this;return a.name=r,a.index=n,a.operation=i,a.tree=o,Object.setPrototypeOf(a,s.prototype),a.message=g(t,{name:r,index:n,operation:i,tree:o}),a}return a(t,e),t}(Error),E=m,b=p,y={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=O(r,this.path);n&&(n=p(n));var i=A(r,{op:"remove",path:this.from}).removed;return A(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=O(r,this.from);return A(r,{op:"add",path:this.path,value:p(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:x(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},w={add:function(e,t,r){return u(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:y.move,copy:y.copy,test:y.test,_get:y._get};function O(e,t){if(""==t)return e;var r={op:"_get",path:t};return A(e,r),r.value}function A(e,t,r,n,i,o){if(void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=0),r&&("function"==typeof r?r(t,0,e,t.path):$(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=O(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=x(e,t.value),!1===s.test)throw new E("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(r)throw new E("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}n||(e=p(e));var a=(t.path||"").split("/"),l=e,c=1,h=a.length,f=void 0,v=void 0,g=void 0;for(g="function"==typeof r?r:$;;){if(v=a[c],i&&"__proto__"==v)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===f&&(void 0===l[v]?f=a.slice(0,c).join("/"):c==h-1&&(f=t.path),void 0!==f&&g(t,0,e,f)),c++,Array.isArray(l)){if("-"===v)v=l.length;else{if(r&&!u(v))throw new E("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);u(v)&&(v=~~v)}if(c>=h){if(r&&"add"===t.op&&v>l.length)throw new E("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(s=w[t.op].call(t,l,v,e)).test)throw new E("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(v&&-1!=v.indexOf("~")&&(v=d(v)),c>=h){if(!1===(s=y[t.op].call(t,l,v,e)).test)throw new E("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}l=l[v]}}function I(e,t,r,n,i){if(void 0===n&&(n=!0),void 0===i&&(i=!0),r&&!Array.isArray(t))throw new E("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=p(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=A(e,t[s],r,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function $(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new E("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!y[e.op])throw new E("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if("string"!=typeof e.path)throw new E("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new E('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new E("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new E("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&v(e.value))throw new E("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r)if("add"==e.op){var i=e.path.split("/").length,o=n.split("/").length;if(i!==o+1&&i!==o)throw new E("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new E("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var s=R([{op:"_get",path:e.from,value:void 0}],r);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new E("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}function R(e,t,r){try{if(!Array.isArray(e))throw new E("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)I(p(t),p(e),r||!0);else{r=r||$;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof E)return e;throw e}}function x(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,i,o=Array.isArray(e),s=Array.isArray(t);if(o&&s){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!x(e[r],t[r]))return!1;return!0}if(o!=s)return!1;var a=Object.keys(e);if((n=a.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=n;0!=r--;)if(!x(e[i=a[r]],t[i]))return!1;return!0}return e!=e&&t!=t}var N=Object.freeze({__proto__:null,JsonPatchError:E,deepClone:b,getValueByPointer:O,applyOperation:A,applyPatch:I,applyReducer:function(e,t,r){var n=A(e,t);if(!1===n.test)throw new E("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument},validator:$,validate:R,_areEquals:x}),S=new WeakMap,T=function(e){this.observers=new Map,this.obj=e},L=function(e,t){this.callback=e,this.observer=t};
/*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017 Joachim Wester
   * MIT license
   */function C(e,t){void 0===t&&(t=!1);var r=S.get(e.object);D(r.value,e.object,e.patches,"",t),e.patches.length&&I(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function D(e,t,r,n,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=h(t),s=h(e),a=!1,l=s.length-1;l>=0;l--){var u=e[v=s[l]];if(!c(t,v)||void 0===t[v]&&void 0!==u&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&r.push({op:"test",path:n+"/"+f(v),value:p(u)}),r.push({op:"remove",path:n+"/"+f(v)}),a=!0):(i&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}));else{var d=t[v];"object"==typeof u&&null!=u&&"object"==typeof d&&null!=d?D(u,d,r,n+"/"+f(v),i):u!==d&&(i&&r.push({op:"test",path:n+"/"+f(v),value:p(u)}),r.push({op:"replace",path:n+"/"+f(v),value:p(d)}))}}if(a||o.length!=s.length)for(l=0;l<o.length;l++){var v;c(e,v=o[l])||void 0===t[v]||r.push({op:"add",path:n+"/"+f(v),value:p(t[v])})}}}var k=Object.freeze({__proto__:null,unobserve:function(e,t){t.unobserve()},observe:function(e,t){var r,n=function(e){return S.get(e)}(e);if(n){var i=function(e,t){return e.observers.get(t)}(n,t);r=i&&i.observer}else n=new T(e),S.set(e,n);if(r)return r;if(r={},n.value=p(e),t){r.callback=t,r.next=null;var o=function(){C(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=[],r.object=e,r.unobserve=function(){C(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(n,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},n.observers.set(t,new L(t,r)),r},generate:C,compare:function(e,t,r){void 0===r&&(r=!1);var n=[];return D(e,t,n,"",r),n}});Object.assign({},N,k,{JsonPatchError:m,deepClone:p,escapePathComponent:f,unescapePathComponent:d});var F=/("(?:[^\\"]|\\.)*")|[:,]/g,P=function(e,t){var r,n,i;return t=t||{},r=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),n=""===r?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,s){var a,l,c,h,p,u,f,d,v,g,m,E;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(m=JSON.stringify(t,i)))return m;if(f=n-o.length-s,m.length<=f&&(v=m.replace(F,(function(e,t){return t||e+" "}))).length<=f)return v;if(null!=i&&(t=JSON.parse(m),i=void 0),"object"==typeof t&&null!==t){if(d=o+r,c=[],l=0,Array.isArray(t))for(g="[",a="]",f=t.length;l<f;l++)c.push(e(t[l],d,l===f-1?0:1)||"null");else for(g="{",a="}",f=(u=Object.keys(t)).length;l<f;l++)h=u[l],p=JSON.stringify(h)+": ",void 0!==(E=e(t[h],d,p.length+(l===f-1?0:1)))&&c.push(p+E);if(c.length>0)return[g,r+c.join(",\n"+d),a].join("\n"+o)}return m}(e,"",0)},_={exports:{}};var j={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var z="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=j,n=z,i=(t=e.exports={}).re=[],o=t.src=[],s=t.t={};let a=0;const l=(e,t,r)=>{const l=a++;n(l,t),s[e]=l,o[l]=t,i[l]=new RegExp(t,r?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),l("FULL",`^${o[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),l("LOOSE",`^${o[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),l("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),l("COERCERTL",o[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(_,_.exports);const M=["includePrerelease","loose","rtl"];var B=e=>e?"object"!=typeof e?{loose:!0}:M.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};const G=/^[0-9]+$/,U=(e,t)=>{const r=G.test(e),n=G.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var X={compareIdentifiers:U,rcompareIdentifiers:(e,t)=>U(t,e)};const V=z,{MAX_LENGTH:W,MAX_SAFE_INTEGER:H}=j,{re:q,t:Y}=_.exports,J=B,{compareIdentifiers:Q}=X;class Z{constructor(e,t){if(t=J(t),e instanceof Z){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>W)throw new TypeError(`version is longer than ${W} characters`);V("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?q[Y.LOOSE]:q[Y.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>H||this.major<0)throw new TypeError("Invalid major version");if(this.minor>H||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>H||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<H)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(V("SemVer.compare",this.version,this.options,e),!(e instanceof Z)){if("string"==typeof e&&e===this.version)return 0;e=new Z(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Z||(e=new Z(e,this.options)),Q(this.major,e.major)||Q(this.minor,e.minor)||Q(this.patch,e.patch)}comparePre(e){if(e instanceof Z||(e=new Z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],n=e.prerelease[t];if(V("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return Q(r,n)}while(++t)}compareBuild(e){e instanceof Z||(e=new Z(e,this.options));let t=0;do{const r=this.build[t],n=e.build[t];if(V("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return Q(r,n)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var K=Z;const{MAX_LENGTH:ee}=j,{re:te,t:re}=_.exports,ne=K,ie=B;var oe=(e,t)=>{if(t=ie(t),e instanceof ne)return e;if("string"!=typeof e)return null;if(e.length>ee)return null;if(!(t.loose?te[re.LOOSE]:te[re.FULL]).test(e))return null;try{return new ne(e,t)}catch(e){return null}};const se=oe;var ae=(e,t)=>{const r=se(e,t);return r?r.version:null};const le=oe;var ce=(e,t)=>{const r=le(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};const he=K;var pe=(e,t,r,n)=>{"string"==typeof r&&(n=r,r=void 0);try{return new he(e,r).inc(t,n).version}catch(e){return null}};const ue=K;var fe=(e,t,r)=>new ue(e,r).compare(new ue(t,r));const de=fe;var ve=(e,t,r)=>0===de(e,t,r);const ge=oe,me=ve;var Ee=(e,t)=>{if(me(e,t))return null;{const r=ge(e),n=ge(t),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==n[e])return o+e;return s}};const be=K;var ye=(e,t)=>new be(e,t).major;const we=K;var Oe=(e,t)=>new we(e,t).minor;const Ae=K;var Ie=(e,t)=>new Ae(e,t).patch;const $e=oe;var Re=(e,t)=>{const r=$e(e,t);return r&&r.prerelease.length?r.prerelease:null};const xe=fe;var Ne=(e,t,r)=>xe(t,e,r);const Se=fe;var Te=(e,t)=>Se(e,t,!0);const Le=K;var Ce=(e,t,r)=>{const n=new Le(e,r),i=new Le(t,r);return n.compare(i)||n.compareBuild(i)};const De=Ce;var ke=(e,t)=>e.sort(((e,r)=>De(e,r,t)));const Fe=Ce;var Pe=(e,t)=>e.sort(((e,r)=>Fe(r,e,t)));const _e=fe;var je=(e,t,r)=>_e(e,t,r)>0;const ze=fe;var Me=(e,t,r)=>ze(e,t,r)<0;const Be=fe;var Ge=(e,t,r)=>0!==Be(e,t,r);const Ue=fe;var Xe=(e,t,r)=>Ue(e,t,r)>=0;const Ve=fe;var We=(e,t,r)=>Ve(e,t,r)<=0;const He=ve,qe=Ge,Ye=je,Je=Xe,Qe=Me,Ze=We;var Ke=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return He(e,r,n);case"!=":return qe(e,r,n);case">":return Ye(e,r,n);case">=":return Je(e,r,n);case"<":return Qe(e,r,n);case"<=":return Ze(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};const et=K,tt=oe,{re:rt,t:nt}=_.exports;var it=(e,t)=>{if(e instanceof et)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=rt[nt.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),rt[nt.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;rt[nt.COERCERTL].lastIndex=-1}else r=e.match(rt[nt.COERCE]);return null===r?null:tt(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)},ot=st;function st(e){var t=this;if(t instanceof st||(t=new st),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function at(e,t,r){var n=t===e.head?new ht(r,null,t,e):new ht(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function lt(e,t){e.tail=new ht(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ct(e,t){e.head=new ht(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ht(e,t,r,n){if(!(this instanceof ht))return new ht(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}st.Node=ht,st.create=st,st.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},st.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},st.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},st.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)lt(this,arguments[e]);return this.length},st.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ct(this,arguments[e]);return this.length},st.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},st.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},st.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},st.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},st.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},st.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},st.prototype.map=function(e,t){t=t||this;for(var r=new st,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},st.prototype.mapReverse=function(e,t){t=t||this;for(var r=new st,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},st.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},st.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},st.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},st.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},st.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new st;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},st.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new st;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)r.push(i.value);return r},st.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var o=[];for(n=0;i&&n<t;n++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(n=0;n<r.length;n++)i=at(this,i,r[n]);return o},st.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{!function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}(st)}catch(e){}const pt=ot,ut=Symbol("max"),ft=Symbol("length"),dt=Symbol("lengthCalculator"),vt=Symbol("allowStale"),gt=Symbol("maxAge"),mt=Symbol("dispose"),Et=Symbol("noDisposeOnSet"),bt=Symbol("lruList"),yt=Symbol("cache"),wt=Symbol("updateAgeOnGet"),Ot=()=>1;const At=(e,t,r)=>{const n=e[yt].get(t);if(n){const t=n.value;if(It(e,t)){if(Rt(e,n),!e[vt])return}else r&&(e[wt]&&(n.value.now=Date.now()),e[bt].unshiftNode(n));return t.value}},It=(e,t)=>{if(!t||!t.maxAge&&!e[gt])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[gt]&&r>e[gt]},$t=e=>{if(e[ft]>e[ut])for(let t=e[bt].tail;e[ft]>e[ut]&&null!==t;){const r=t.prev;Rt(e,t),t=r}},Rt=(e,t)=>{if(t){const r=t.value;e[mt]&&e[mt](r.key,r.value),e[ft]-=r.length,e[yt].delete(r.key),e[bt].removeNode(t)}};class xt{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const Nt=(e,t,r,n)=>{let i=r.value;It(e,i)&&(Rt(e,r),e[vt]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};var St=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[ut]=e.max||1/0;const t=e.length||Ot;if(this[dt]="function"!=typeof t?Ot:t,this[vt]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[gt]=e.maxAge||0,this[mt]=e.dispose,this[Et]=e.noDisposeOnSet||!1,this[wt]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[ut]=e||1/0,$t(this)}get max(){return this[ut]}set allowStale(e){this[vt]=!!e}get allowStale(){return this[vt]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[gt]=e,$t(this)}get maxAge(){return this[gt]}set lengthCalculator(e){"function"!=typeof e&&(e=Ot),e!==this[dt]&&(this[dt]=e,this[ft]=0,this[bt].forEach((e=>{e.length=this[dt](e.value,e.key),this[ft]+=e.length}))),$t(this)}get lengthCalculator(){return this[dt]}get length(){return this[ft]}get itemCount(){return this[bt].length}rforEach(e,t){t=t||this;for(let r=this[bt].tail;null!==r;){const n=r.prev;Nt(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[bt].head;null!==r;){const n=r.next;Nt(this,e,r,t),r=n}}keys(){return this[bt].toArray().map((e=>e.key))}values(){return this[bt].toArray().map((e=>e.value))}reset(){this[mt]&&this[bt]&&this[bt].length&&this[bt].forEach((e=>this[mt](e.key,e.value))),this[yt]=new Map,this[bt]=new pt,this[ft]=0}dump(){return this[bt].map((e=>!It(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[bt]}set(e,t,r){if((r=r||this[gt])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,i=this[dt](t,e);if(this[yt].has(e)){if(i>this[ut])return Rt(this,this[yt].get(e)),!1;const o=this[yt].get(e).value;return this[mt]&&(this[Et]||this[mt](e,o.value)),o.now=n,o.maxAge=r,o.value=t,this[ft]+=i-o.length,o.length=i,this.get(e),$t(this),!0}const o=new xt(e,t,i,n,r);return o.length>this[ut]?(this[mt]&&this[mt](e,t),!1):(this[ft]+=o.length,this[bt].unshift(o),this[yt].set(e,this[bt].head),$t(this),!0)}has(e){if(!this[yt].has(e))return!1;const t=this[yt].get(e).value;return!It(this,t)}get(e){return At(this,e,!0)}peek(e){return At(this,e,!1)}pop(){const e=this[bt].tail;return e?(Rt(this,e),e.value):null}del(e){Rt(this,this[yt].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[yt].forEach(((e,t)=>At(this,t,!1)))}};class Tt{constructor(e,t){if(t=Dt(t),e instanceof Tt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Tt(e.raw,t);if(e instanceof kt)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!Gt(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&Ut(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,r=Ct.get(t);if(r)return r;const n=this.options.loose,i=n?_t[jt.HYPHENRANGELOOSE]:_t[jt.HYPHENRANGE];e=e.replace(i,tr(this.options.includePrerelease)),Ft("hyphen replace",e),e=e.replace(_t[jt.COMPARATORTRIM],zt),Ft("comparator trim",e,_t[jt.COMPARATORTRIM]),e=(e=(e=e.replace(_t[jt.TILDETRIM],Mt)).replace(_t[jt.CARETTRIM],Bt)).split(/\s+/).join(" ");const o=n?_t[jt.COMPARATORLOOSE]:_t[jt.COMPARATOR],s=e.split(" ").map((e=>Vt(e,this.options))).join(" ").split(/\s+/).map((e=>er(e,this.options))).filter(this.options.loose?e=>!!e.match(o):()=>!0).map((e=>new kt(e,this.options)));s.length;const a=new Map;for(const e of s){if(Gt(e))return[e];a.set(e.value,e)}a.size>1&&a.has("")&&a.delete("");const l=[...a.values()];return Ct.set(t,l),l}intersects(e,t){if(!(e instanceof Tt))throw new TypeError("a Range is required");return this.set.some((r=>Xt(r,t)&&e.set.some((e=>Xt(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Pt(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(rr(this.set[t],e,this.options))return!0;return!1}}var Lt=Tt;const Ct=new St({max:1e3}),Dt=B,kt=or,Ft=z,Pt=K,{re:_t,t:jt,comparatorTrimReplace:zt,tildeTrimReplace:Mt,caretTrimReplace:Bt}=_.exports,Gt=e=>"<0.0.0-0"===e.value,Ut=e=>""===e.value,Xt=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},Vt=(e,t)=>(Ft("comp",e,t),e=Yt(e,t),Ft("caret",e),e=Ht(e,t),Ft("tildes",e),e=Qt(e,t),Ft("xrange",e),e=Kt(e,t),Ft("stars",e),e),Wt=e=>!e||"x"===e.toLowerCase()||"*"===e,Ht=(e,t)=>e.trim().split(/\s+/).map((e=>qt(e,t))).join(" "),qt=(e,t)=>{const r=t.loose?_t[jt.TILDELOOSE]:_t[jt.TILDE];return e.replace(r,((t,r,n,i,o)=>{let s;return Ft("tilde",e,t,r,n,i,o),Wt(r)?s="":Wt(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:Wt(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(Ft("replaceTilde pr",o),s=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,Ft("tilde return",s),s}))},Yt=(e,t)=>e.trim().split(/\s+/).map((e=>Jt(e,t))).join(" "),Jt=(e,t)=>{Ft("caret",e,t);const r=t.loose?_t[jt.CARETLOOSE]:_t[jt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,o,s)=>{let a;return Ft("caret",e,t,r,i,o,s),Wt(r)?a="":Wt(i)?a=`>=${r}.0.0${n} <${+r+1}.0.0-0`:Wt(o)?a="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(Ft("replaceCaret pr",s),a="0"===r?"0"===i?`>=${r}.${i}.${o}-${s} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${s} <${+r+1}.0.0-0`):(Ft("no pr"),a="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),Ft("caret return",a),a}))},Qt=(e,t)=>(Ft("replaceXRanges",e,t),e.split(/\s+/).map((e=>Zt(e,t))).join(" ")),Zt=(e,t)=>{e=e.trim();const r=t.loose?_t[jt.XRANGELOOSE]:_t[jt.XRANGE];return e.replace(r,((r,n,i,o,s,a)=>{Ft("xRange",e,r,n,i,o,s,a);const l=Wt(i),c=l||Wt(o),h=c||Wt(s),p=h;return"="===n&&p&&(n=""),a=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(o=0),s=0,">"===n?(n=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",c?i=+i+1:o=+o+1),"<"===n&&(a="-0"),r=`${n+i}.${o}.${s}${a}`):c?r=`>=${i}.0.0${a} <${+i+1}.0.0-0`:h&&(r=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`),Ft("xRange return",r),r}))},Kt=(e,t)=>(Ft("replaceStars",e,t),e.trim().replace(_t[jt.STAR],"")),er=(e,t)=>(Ft("replaceGTE0",e,t),e.trim().replace(_t[t.includePrerelease?jt.GTE0PRE:jt.GTE0],"")),tr=e=>(t,r,n,i,o,s,a,l,c,h,p,u,f)=>`${r=Wt(n)?"":Wt(i)?`>=${n}.0.0${e?"-0":""}`:Wt(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=Wt(c)?"":Wt(h)?`<${+c+1}.0.0-0`:Wt(p)?`<${c}.${+h+1}.0-0`:u?`<=${c}.${h}.${p}-${u}`:e?`<${c}.${h}.${+p+1}-0`:`<=${l}`}`.trim(),rr=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(Ft(e[r].semver),e[r].semver!==kt.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0},nr=Symbol("SemVer ANY");class ir{static get ANY(){return nr}constructor(e,t){if(t=sr(t),e instanceof ir){if(e.loose===!!t.loose)return e;e=e.value}hr("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===nr?this.value="":this.value=this.operator+this.semver.version,hr("comp",this)}parse(e){const t=this.options.loose?ar[lr.COMPARATORLOOSE]:ar[lr.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new pr(r[2],this.options.loose):this.semver=nr}toString(){return this.value}test(e){if(hr("Comparator.test",e,this.options.loose),this.semver===nr||e===nr)return!0;if("string"==typeof e)try{e=new pr(e,this.options)}catch(e){return!1}return cr(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof ir))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new ur(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new ur(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=cr(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),a=cr(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||i&&o||s||a}}var or=ir;const sr=B,{re:ar,t:lr}=_.exports,cr=Ke,hr=z,pr=K,ur=Lt,fr=Lt;var dr=(e,t,r)=>{try{t=new fr(t,r)}catch(e){return!1}return t.test(e)};const vr=Lt;var gr=(e,t)=>new vr(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const mr=K,Er=Lt;var br=(e,t,r)=>{let n=null,i=null,o=null;try{o=new Er(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(n&&-1!==i.compare(e)||(n=e,i=new mr(n,r)))})),n};const yr=K,wr=Lt;var Or=(e,t,r)=>{let n=null,i=null,o=null;try{o=new wr(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(n&&1!==i.compare(e)||(n=e,i=new yr(n,r)))})),n};const Ar=K,Ir=Lt,$r=je;var Rr=(e,t)=>{e=new Ir(e,t);let r=new Ar("0.0.0");if(e.test(r))return r;if(r=new Ar("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const n=e.set[t];let i=null;n.forEach((e=>{const t=new Ar(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!$r(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||r&&!$r(r,i)||(r=i)}return r&&e.test(r)?r:null};const xr=Lt;var Nr=(e,t)=>{try{return new xr(e,t).range||"*"}catch(e){return null}};const Sr=K,Tr=or,{ANY:Lr}=Tr,Cr=Lt,Dr=dr,kr=je,Fr=Me,Pr=We,_r=Xe;var jr=(e,t,r,n)=>{let i,o,s,a,l;switch(e=new Sr(e,n),t=new Cr(t,n),r){case">":i=kr,o=Pr,s=Fr,a=">",l=">=";break;case"<":i=Fr,o=_r,s=kr,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Dr(e,t,n))return!1;for(let r=0;r<t.set.length;++r){const c=t.set[r];let h=null,p=null;if(c.forEach((e=>{e.semver===Lr&&(e=new Tr(">=0.0.0")),h=h||e,p=p||e,i(e.semver,h.semver,n)?h=e:s(e.semver,p.semver,n)&&(p=e)})),h.operator===a||h.operator===l)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===l&&s(e,p.semver))return!1}return!0};const zr=jr;var Mr=(e,t,r)=>zr(e,t,">",r);const Br=jr;var Gr=(e,t,r)=>Br(e,t,"<",r);const Ur=Lt;var Xr=(e,t,r)=>(e=new Ur(e,r),t=new Ur(t,r),e.intersects(t));const Vr=dr,Wr=fe;const Hr=Lt,qr=or,{ANY:Yr}=qr,Jr=dr,Qr=fe,Zr=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===Yr){if(1===t.length&&t[0].semver===Yr)return!0;e=r.includePrerelease?[new qr(">=0.0.0-0")]:[new qr(">=0.0.0")]}if(1===t.length&&t[0].semver===Yr){if(r.includePrerelease)return!0;t=[new qr(">=0.0.0")]}const n=new Set;let i,o,s,a,l,c,h;for(const t of e)">"===t.operator||">="===t.operator?i=Kr(i,t,r):"<"===t.operator||"<="===t.operator?o=en(o,t,r):n.add(t.semver);if(n.size>1)return null;if(i&&o){if(s=Qr(i.semver,o.semver,r),s>0)return null;if(0===s&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of n){if(i&&!Jr(e,String(i),r))return null;if(o&&!Jr(e,String(o),r))return null;for(const n of t)if(!Jr(e,String(n),r))return!1;return!0}let p=!(!o||r.includePrerelease||!o.semver.prerelease.length)&&o.semver,u=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;p&&1===p.prerelease.length&&"<"===o.operator&&0===p.prerelease[0]&&(p=!1);for(const e of t){if(h=h||">"===e.operator||">="===e.operator,c=c||"<"===e.operator||"<="===e.operator,i)if(u&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===u.major&&e.semver.minor===u.minor&&e.semver.patch===u.patch&&(u=!1),">"===e.operator||">="===e.operator){if(a=Kr(i,e,r),a===e&&a!==i)return!1}else if(">="===i.operator&&!Jr(i.semver,String(e),r))return!1;if(o)if(p&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===p.major&&e.semver.minor===p.minor&&e.semver.patch===p.patch&&(p=!1),"<"===e.operator||"<="===e.operator){if(l=en(o,e,r),l===e&&l!==o)return!1}else if("<="===o.operator&&!Jr(o.semver,String(e),r))return!1;if(!e.operator&&(o||i)&&0!==s)return!1}return!(i&&c&&!o&&0!==s)&&(!(o&&h&&!i&&0!==s)&&(!u&&!p))},Kr=(e,t,r)=>{if(!e)return t;const n=Qr(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},en=(e,t,r)=>{if(!e)return t;const n=Qr(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};var tn=(e,t,r={})=>{if(e===t)return!0;e=new Hr(e,r),t=new Hr(t,r);let n=!1;e:for(const i of e.set){for(const e of t.set){const t=Zr(i,e,r);if(n=n||null!==t,t)continue e}if(n)return!1}return!0};const rn=_.exports;var nn={re:rn.re,src:rn.src,tokens:rn.t,SEMVER_SPEC_VERSION:j.SEMVER_SPEC_VERSION,SemVer:K,compareIdentifiers:X.compareIdentifiers,rcompareIdentifiers:X.rcompareIdentifiers,parse:oe,valid:ae,clean:ce,inc:pe,diff:Ee,major:ye,minor:Oe,patch:Ie,prerelease:Re,compare:fe,rcompare:Ne,compareLoose:Te,compareBuild:Ce,sort:ke,rsort:Pe,gt:je,lt:Me,eq:ve,neq:Ge,gte:Xe,lte:We,cmp:Ke,coerce:it,Comparator:or,Range:Lt,satisfies:dr,toComparators:gr,maxSatisfying:br,minSatisfying:Or,minVersion:Rr,validRange:Nr,outside:jr,gtr:Mr,ltr:Gr,intersects:Xr,simplifyRange:(e,t,r)=>{const n=[];let i=null,o=null;const s=e.sort(((e,t)=>Wr(e,t,r)));for(const e of s){Vr(e,t,r)?(o=e,i||(i=e)):(o&&n.push([i,o]),o=null,i=null)}i&&n.push([i,null]);const a=[];for(const[e,t]of n)e===t?a.push(e):t||e!==s[0]?t?e===s[0]?a.push(`<=${t}`):a.push(`${e} - ${t}`):a.push(`>=${e}`):a.push("*");const l=a.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return l.length<c.length?l:t},subset:tn};function on(e){const[t,r]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:r}}const sn="#fff",an={background:"#333",title:{color:sn,subtitleColor:sn},style:{"guide-label":{fill:sn},"guide-title":{fill:sn}},axis:{domainColor:sn,gridColor:"#888",tickColor:sn}},ln="#4572a7",cn={background:"#fff",arc:{fill:ln},area:{fill:ln},line:{stroke:ln,strokeWidth:2},path:{stroke:ln},rect:{fill:ln},shape:{stroke:ln},symbol:{fill:ln,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},hn="#30a2da",pn="#cbcbcb",un="#f0f0f0",fn="#333",dn={arc:{fill:hn},area:{fill:hn},axis:{domainColor:pn,grid:!0,gridColor:pn,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:pn,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:un,group:{fill:un},legend:{labelColor:fn,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:fn,titleFontSize:14,titlePadding:10},line:{stroke:hn,strokeWidth:2},path:{stroke:hn,strokeWidth:.5},rect:{fill:hn},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:hn},bar:{binSpacing:2,fill:hn,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},vn="#000",gn={group:{fill:"#e5e5e5"},arc:{fill:vn},area:{fill:vn},line:{stroke:vn},path:{stroke:vn},rect:{fill:vn},shape:{stroke:vn},symbol:{fill:vn,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},mn="Benton Gothic, sans-serif",En="#82c6df",bn="Benton Gothic Bold, sans-serif",yn="normal",wn={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},On={background:"#ffffff",title:{anchor:"start",color:"#000000",font:bn,fontSize:22,fontWeight:"normal"},arc:{fill:En},area:{fill:En},line:{stroke:En,strokeWidth:2},path:{stroke:En},rect:{fill:En},shape:{stroke:En},symbol:{fill:En,size:30},axis:{labelFont:mn,labelFontSize:11.5,labelFontWeight:"normal",titleFont:bn,titleFontSize:13,titleFontWeight:yn},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:mn,labelFontSize:11.5,symbolType:"square",titleFont:bn,titleFontSize:13,titleFontWeight:yn},range:{category:wn["category-6"],diverging:wn["fireandice-6"],heatmap:wn["fire-7"],ordinal:wn["fire-7"],ramp:wn["fire-7"]}},An="#ab5787",In="#979797",$n={background:"#f9f9f9",arc:{fill:An},area:{fill:An},line:{stroke:An},path:{stroke:An},rect:{fill:An},shape:{stroke:An},symbol:{fill:An,size:30},axis:{domainColor:In,domainWidth:.5,gridWidth:.2,labelColor:In,tickColor:In,tickWidth:.2,titleColor:In},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Rn="#3e5c69",xn={background:"#fff",arc:{fill:Rn},area:{fill:Rn},line:{stroke:Rn},path:{stroke:Rn},rect:{fill:Rn},shape:{stroke:Rn},symbol:{fill:Rn},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Nn="#1696d2",Sn="#000000",Tn="Lato",Ln="Lato",Cn={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Dn={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Tn},axisX:{domain:!0,domainColor:Sn,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Ln,labelAngle:0,tickColor:Sn,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Tn},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Ln,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Tn,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Ln,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Tn,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Cn["six-groups-cat-1"],diverging:Cn["diverging-colors"],heatmap:Cn["diverging-colors"],ordinal:Cn["six-groups-seq"],ramp:Cn["shades-blue"]},area:{fill:Nn},rect:{fill:Nn},line:{color:Nn,stroke:Nn,strokeWidth:5},trail:{color:Nn,stroke:Nn,strokeWidth:0,size:1},path:{stroke:Nn,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Nn,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Nn,stroke:null}},arc:{fill:Nn},shape:{stroke:Nn},symbol:{fill:Nn,size:30}},kn="#3366CC",Fn="#ccc",Pn="Arial, sans-serif",_n={arc:{fill:kn},area:{fill:kn},path:{stroke:kn},rect:{fill:kn},shape:{stroke:kn},symbol:{stroke:kn},circle:{fill:kn},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Pn,fontSize:12},"guide-title":{font:Pn,fontSize:12},"group-title":{font:Pn,fontSize:12}},title:{font:Pn,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Fn,tickColor:Fn,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},jn="2.10.0";var zn=Object.freeze({__proto__:null,dark:an,excel:cn,fivethirtyeight:dn,ggplot2:gn,googlecharts:_n,latimes:On,quartz:$n,urbaninstitute:Dn,version:jn,vox:xn});function Mn(e,t,r){return e.fields=t||[],e.fname=r,e}function Bn(e){return 1===e.length?Gn(e[0]):Un(e)}const Gn=e=>function(t){return t[e]},Un=e=>{const t=e.length;return function(r){for(let n=0;n<t;++n)r=r[e[n]];return r}};function Xn(e){throw Error(e)}!function(e,t,r){const n=function(e){const t=[],r=e.length;let n,i,o,s=null,a=0,l="";function c(){t.push(l+e.substring(n,i)),l="",n=i+1}for(e+="",n=i=0;i<r;++i)if(o=e[i],"\\"===o)l+=e.substring(n,i),l+=e.substring(++i,++i),n=i;else if(o===s)c(),s=null,a=-1;else{if(s)continue;n===a&&'"'===o||n===a&&"'"===o?(n=i+1,s=o):"."!==o||a?"["===o?(i>n&&c(),a=n=i+1):"]"===o&&(a||Xn("Access path missing open bracket: "+e),a>0&&c(),a=0,n=i+1):i>n?c():n=i+1}return a&&Xn("Access path missing closing bracket: "+e),s&&Xn("Access path missing closing quote: "+e),i>n&&(i++,c()),t}(e);e=1===n.length?n[0]:e,Mn((r&&r.get||Bn)(n),[e],t||e)}("id"),Mn((e=>e),[],"identity"),Mn((()=>0),[],"zero"),Mn((()=>1),[],"one"),Mn((()=>!0),[],"true"),Mn((()=>!1),[],"false");var Vn=Array.isArray;function Wn(e){return e===Object(e)}var Hn="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const qn="vg-tooltip-element",Yn={offsetX:10,offsetY:10,id:qn,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function Jn(e,t,r){if(Vn(e))return`[${e.map((e=>t("string"==typeof e?e:Qn(e,r)))).join(", ")}]`;if(Wn(e)){let n="";const i=e,{title:o,image:s}=i,a=
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(i,["title","image"]);o&&(n+=`<h2>${t(o)}</h2>`),s&&(n+=`<img src="${t(s)}">`);const l=Object.keys(a);if(l.length>0){n+="<table>";for(const e of l){let i=a[e];void 0!==i&&(Wn(i)&&(i=Qn(i,r)),n+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}n+="</table>"}return n||"{}"}return t(e)}function Qn(e,t){return JSON.stringify(e,function(e){const t=[];return function(r,n){if("object"!=typeof n||null===n)return n;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(n)>=0?"[Circular]":(t.push(n),n)}}(t))}class Zn{constructor(e){this.options=Object.assign(Object.assign({},Yn),e);const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Hn.toString().replace(qn,e)}(t);const r=document.head;r.childNodes.length>0?r.insertBefore(e,r.childNodes[0]):r.appendChild(e)}}tooltipHandler(e,t,r,n){this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));if((null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null==n||""===n)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=Jn(n,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(e,t,r,n){let i=e.clientX+r;i+t.width>window.innerWidth&&(i=+e.clientX-r-t.width);let o=e.clientY+n;return o+t.height>window.innerHeight&&(o=+e.clientY-n-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}var Kn,ei='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper.fit-x {\n    width: 100%; }\n  .vega-embed .chart-wrapper.fit-y {\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function ti(e,...t){for(const r of t)ri(e,r);return e}function ri(t,r){for(const n of Object.keys(r))e.writeConfig(t,n,r[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const ni=i;let ii=o;const oi="undefined"!=typeof window?window:void 0;void 0===ii&&null!=oi&&null!==(Kn=oi.vl)&&void 0!==Kn&&Kn.compile&&(ii=oi.vl);const si={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},ai={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},li={vega:"Vega","vega-lite":"Vega-Lite"},ci={vega:ni.version,"vega-lite":ii?ii.version:"not available"},hi={vega:e=>e,"vega-lite":(e,t)=>ii.compile(e,{config:t}).spec},pi='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',ui="chart-wrapper";function fi(e,t,r,n){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${r}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${li[n]} JSON Source`}function di(e){return(t=e)&&"load"in t?e:ni.loader(e);var t}function vi(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}async function gi(t,r,n={}){var i,o;let s,a;e.isString(r)?(a=di(n.loader),s=JSON.parse(await a.load(r))):s=r;const l=vi(s).loader;var c;a&&!l||(a=di(null!==(c=n.loader)&&void 0!==c?c:l));const h=await mi(vi(s),a),p=await mi(n,a),u={...ti(p,h),config:e.mergeConfig(null!==(i=p.config)&&void 0!==i?i:{},null!==(o=h.config)&&void 0!==o?o:{})};return await async function(t,r,n={},i){var o,s,a,l,c;const h=n.theme?e.mergeConfig(zn[n.theme],null!==(o=n.config)&&void 0!==o?o:{}):n.config,p=e.isBoolean(n.actions)?n.actions:ti({},si,null!==(s=n.actions)&&void 0!==s?s:{}),u={...ai,...n.i18n},f=null!==(a=n.renderer)&&void 0!==a?a:"canvas",d=null!==(l=n.logLevel)&&void 0!==l?l:ni.Warn,v=null!==(c=n.downloadFileName)&&void 0!==c?c:"visualization",g="string"==typeof t?document.querySelector(t):t;if(!g)throw new Error(`${t} does not exist`);if(!1!==n.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){const t=e.getRootNode?e.getRootNode():document;var r;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:null!==(r=document.head)&&void 0!==r?r:document.body}}(g);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?ei.toString():n.defaultStyle,r.appendChild(t)}}const m=function(e,t){if(e.$schema){const n=on(e.$schema);var r;t&&t!==n.library&&console.warn(`The given visualization spec is written in ${li[n.library]}, but mode argument sets ${null!==(r=li[t])&&void 0!==r?r:t}.`);const i=n.library;return nn.satisfies(ci[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${li[i]} ${n.version}, but the current version of ${li[i]} is v${ci[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}(r,n.mode);let E=hi[m](r,h);if("vega-lite"===m&&E.$schema){const e=on(E.$schema);nn.satisfies(ci.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${ci.vega}.`)}g.classList.add("vega-embed"),p&&g.classList.add("has-actions");g.innerHTML="";let b=g;if(p){const e=document.createElement("div");e.classList.add(ui),g.appendChild(e),b=e}const y=n.patch;y&&(E=y instanceof Function?y(E):I(E,y,!0,!1).newDocument);n.formatLocale&&ni.formatLocale(n.formatLocale);n.timeFormatLocale&&ni.timeFormatLocale(n.timeFormatLocale);const{ast:w}=n,O=ni.parse(E,"vega-lite"===m?{}:h,{ast:w}),A=new(n.viewClass||ni.View)(O,{loader:i,logLevel:d,renderer:f,...w?{expr:ni.expressionInterpreter}:{}});if(A.addSignalListener("autosize",((e,t)=>{const{type:r}=t;"fit-x"==r?(b.classList.add("fit-x"),b.classList.remove("fit-y")):"fit-y"==r?(b.classList.remove("fit-x"),b.classList.add("fit-y")):"fit"==r?b.classList.add("fit-x","fit-y"):b.classList.remove("fit-x","fit-y")})),!1!==n.tooltip){let e;e="function"==typeof n.tooltip?n.tooltip:new Zn(!0===n.tooltip?{}:n.tooltip).call,A.tooltip(e)}let $,{hover:R}=n;void 0===R&&(R="vega"===m);if(R){const{hoverSet:e,updateSet:t}="boolean"==typeof R?{}:R;A.hover(e,t)}n&&(null!=n.width&&A.width(n.width),null!=n.height&&A.height(n.height),null!=n.padding&&A.padding(n.padding));if(await A.initialize(b,n.bind).runAsync(),!1!==p){let e=g;if(!1!==n.defaultStyle){const t=document.createElement("details");t.title=u.CLICK_TO_VIEW_ACTIONS,g.append(t),e=t;const r=document.createElement("summary");r.innerHTML=pi,t.append(r),$=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",$)}const t=document.createElement("div");if(e.append(t),t.classList.add("vega-actions"),!0===p||!1!==p.export)for(const e of["svg","png"])if(!0===p||!0===p.export||p.export[e]){const r=u[`${e.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=r,i.href="#",i.target="_blank",i.download=`${v}.${e}`,i.addEventListener("mousedown",(async function(t){t.preventDefault();const r=await A.toImageURL(e,n.scaleFactor);this.href=r})),t.append(i)}if(!0===p||!1!==p.source){const e=document.createElement("a");e.text=u.SOURCE_ACTION,e.href="#",e.addEventListener("click",(function(e){var t,i;fi(P(r),null!==(t=n.sourceHeader)&&void 0!==t?t:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",m),e.preventDefault()})),t.append(e)}if("vega-lite"===m&&(!0===p||!1!==p.compiled)){const e=document.createElement("a");e.text=u.COMPILED_ACTION,e.href="#",e.addEventListener("click",(function(e){var t,r;fi(P(E),null!==(t=n.sourceHeader)&&void 0!==t?t:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),e.preventDefault()})),t.append(e)}if(!0===p||!1!==p.editor){var x;const e=null!==(x=n.editorUrl)&&void 0!==x?x:"https://vega.github.io/editor/",i=document.createElement("a");i.text=u.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(t){!function(e,t,r){const n=e.open(t),{origin:i}=new URL(t);let o=40;e.addEventListener("message",(function t(r){r.source===n&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(n.postMessage(r,i),setTimeout(e,250),o-=1)}),250)}(window,e,{config:h,mode:m,renderer:f,spec:P(r)}),t.preventDefault()})),t.append(i)}}function N(){$&&document.removeEventListener("click",$),A.finalize()}return{view:A,spec:r,vgSpec:E,finalize:N}}(t,s,u,a)}async function mi(t,r){var n;const i=e.isString(t.config)?JSON.parse(await r.load(t.config)):null!==(n=t.config)&&void 0!==n?n:{},o=e.isString(t.patch)?JSON.parse(await r.load(t.patch)):t.patch;return{...t,...o?{patch:o}:{},...i?{config:i}:{}}}async function Ei(e,t={}){var r;const n=document.createElement("div");n.classList.add("vega-embed-wrapper");const i=document.createElement("div");n.appendChild(i);const o=!0===t.actions||!1===t.actions?t.actions:{export:!0,source:!1,compiled:!0,editor:!0,...null!==(r=t.actions)&&void 0!==r?r:{}},s=await gi(i,e,{actions:o,...null!=t?t:{}});return n.value=s.view,n}const bi=(...t)=>{return t.length>1&&(e.isString(t[0])&&!((r=t[0]).startsWith("http://")||r.startsWith("https://")||r.startsWith("//"))||t[0]instanceof HTMLElement||3===t.length)?gi(t[0],t[1],t[2]):Ei(t[0],t[1]);var r};return bi.vegaLite=ii,bi.vl=ii,bi.container=Ei,bi.embed=gi,bi.vega=ni,bi.default=gi,bi.version=s,bi}));
//# sourceMappingURL=vega-embed.min.js.map
